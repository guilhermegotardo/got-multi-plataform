# Multi-platform Yocto Project with Custom U-Boot and Kernel

This project is a Yocto-based build system designed to support multiple platforms.  
It provides a clean separation between the main bootloader, kernel, and applications, allowing easy customization and reproducibility.

---

## ğŸ—ï¸ Project Goal

- Build a **multi-platform Yocto environment**.  
- Start from **U-Boot** customization for Raspberry Pi 3.  
- Extend later to Linux kernel and user-space applications.
- Customize another boards. 

---

## ğŸ“‚ Directory Architecture

yocto-project/
â”œâ”€â”€ poky/ # Poky (core Yocto distribution)
â”œâ”€â”€ build/ # Yocto build output (tmp, deploy, sstate, etc.)
â”œâ”€â”€ layers/ # Custom and external layers
â”‚ â”œâ”€â”€ meta-raspberrypi/ # BSP for Raspberry Pi boards
â”‚ â””â”€â”€ meta-got/ # Custom layer (U-Boot, Kernel, Apps)
â”‚ â””â”€â”€ recipes-bsp/
â”‚ â””â”€â”€ u-boot/
â”‚ â””â”€â”€ u-boot_%.bbappend
â””â”€â”€ sources/ # Fixed external sources
â”œâ”€â”€ u-boot/ # U-Boot related sources
â”‚ â””â”€â”€ u-boot_2024-01/ # U-Boot source tree (2024.01)
â””â”€â”€ rpi-boot/ # Optional: firmware, config.txt, cmdline.txt, etc.

## ğŸš€ Workflow

1. **Initialize build environment**
   ```bash
   source poky/oe-init-build-env build
Build U-Boot for Raspberry Pi 3
bitbake u-boot

Customize U-Boot

Defconfig: sources/u-boot/u-boot_2024-01/configs/rpi_3_got_defconfig

Patches: keep in sources/u-boot/patches/

Managed in meta-got/recipes-bsp/u-boot/u-boot_%.bbappend

Generated files

Final binaries are deployed in:
build/tmp/deploy/images/raspberrypi3/

ğŸ”§ Next Steps
Add Linux kernel sources under sources/linux/.

Extend meta-got with recipes for custom applications.

Integrate boot firmware (start.elf, fixup.dat, config.txt) into the deployment flow.

ğŸ“Œ Notes
FILESEXTRAPATHS is used to point to external source directories.

U-Boot defconfig is set by:

bitbake
UBOOT_MACHINE = "rpi_3_got_defconfig"
